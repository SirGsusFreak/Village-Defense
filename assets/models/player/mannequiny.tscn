[gd_scene load_steps=25 format=3 uid="uid://by5oxb2qc7pf"]

[ext_resource type="PackedScene" uid="uid://c7rsj8gl8w5a8" path="res://assets/models/player/mannequiny-0.4.0.glb" id="1_lx5f6"]
[ext_resource type="Script" path="res://assets/models/player/mannequiny.gd" id="2_67h4e"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_eg5ys"]
animation = &"fight_idle"
use_custom_timeline = true
timeline_length = 2.0
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_qpkgc"]
filter_enabled = true
filters = ["root/Skeleton3D:ball.l", "root/Skeleton3D:ball.r", "root/Skeleton3D:calf.l", "root/Skeleton3D:calf.r", "root/Skeleton3D:foot.l", "root/Skeleton3D:foot.r", "root/Skeleton3D:head", "root/Skeleton3D:neck_01", "root/Skeleton3D:pelvis", "root/Skeleton3D:spine_01", "root/Skeleton3D:spine_02", "root/Skeleton3D:thigh.l", "root/Skeleton3D:thigh.r"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fkgyh"]
animation = &"run"
play_mode = 1
use_custom_timeline = true
timeline_length = 0.75
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_go84v"]
animation = &"idle"
use_custom_timeline = true
timeline_length = 0.75
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_skpds"]
animation = &"run"
use_custom_timeline = true
timeline_length = 0.75
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_8apel"]
blend_point_0/node = SubResource("AnimationNodeAnimation_fkgyh")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_go84v")
blend_point_1/pos = 0.0
blend_point_2/node = SubResource("AnimationNodeAnimation_skpds")
blend_point_2/pos = 1.0
snap = 0.2
value_label = "movement"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_rtgnb"]
resource_name = "fight_blend_tree"
graph_offset = Vector2(-74.0585, -5.31393)
nodes/Fight/node = SubResource("AnimationNodeAnimation_eg5ys")
nodes/Fight/position = Vector2(300, 160)
"nodes/Fighting Stance/node" = SubResource("AnimationNodeBlend2_qpkgc")
"nodes/Fighting Stance/position" = Vector2(700, 100)
nodes/Movement/node = SubResource("AnimationNodeBlendSpace1D_8apel")
nodes/Movement/position = Vector2(360, 340)
nodes/output/position = Vector2(1020, 160)
node_connections = [&"Fighting Stance", 0, &"Fight", &"Fighting Stance", 1, &"Movement", &"output", 0, &"Fighting Stance"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y224w"]
animation = &"air_jump"
use_custom_timeline = true
timeline_length = 1.0
stretch_time_scale = true
start_offset = 0.0
loop_mode = 0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qtbrm"]
animation = &"air_land"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_01ckp"]
animation = &"idle"
use_custom_timeline = true
timeline_length = 1.5
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_io680"]
animation = &"run"
use_custom_timeline = true
timeline_length = 0.75
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_82eht"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a1p80"]
xfade_time = 0.2
advance_condition = &"is_moving"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t3otn"]
xfade_time = 0.2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7erxw"]
xfade_time = 0.2
advance_condition = &"in_air"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_efctx"]
xfade_time = 0.2
switch_mode = 1
advance_condition = &"on_land"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0hr5m"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bs7or"]
xfade_time = 0.2
advance_condition = &"in_air"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eljoh"]
xfade_time = 0.1
advance_condition = &"is_moving"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gp07j"]
switch_mode = 1
advance_condition = &"aiming"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_m634f"]
xfade_time = 0.2
advance_condition = &"aiming"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_n8in7"]
states/BlendTree/node = SubResource("AnimationNodeBlendTree_rtgnb")
states/BlendTree/position = Vector2(382, -28)
states/End/position = Vector2(832, 107.6)
states/Start/position = Vector2(87.8, 79.6)
states/air_jump/node = SubResource("AnimationNodeAnimation_y224w")
states/air_jump/position = Vector2(529.214, 242.8)
states/air_land/node = SubResource("AnimationNodeAnimation_qtbrm")
states/air_land/position = Vector2(239.8, 242.8)
states/idle/node = SubResource("AnimationNodeAnimation_01ckp")
states/idle/position = Vector2(276.8, 79.6)
states/run/node = SubResource("AnimationNodeAnimation_io680")
states/run/position = Vector2(480, 80.0224)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_82eht"), "idle", "run", SubResource("AnimationNodeStateMachineTransition_a1p80"), "run", "idle", SubResource("AnimationNodeStateMachineTransition_t3otn"), "run", "air_jump", SubResource("AnimationNodeStateMachineTransition_7erxw"), "air_jump", "air_land", SubResource("AnimationNodeStateMachineTransition_efctx"), "air_land", "idle", SubResource("AnimationNodeStateMachineTransition_0hr5m"), "idle", "air_jump", SubResource("AnimationNodeStateMachineTransition_bs7or"), "air_land", "run", SubResource("AnimationNodeStateMachineTransition_eljoh"), "run", "BlendTree", SubResource("AnimationNodeStateMachineTransition_gp07j"), "idle", "BlendTree", SubResource("AnimationNodeStateMachineTransition_m634f")]
graph_offset = Vector2(-308, -129)

[node name="mannequiny-0_4_0" instance=ExtResource("1_lx5f6")]
script = ExtResource("2_67h4e")

[node name="Skeleton3D" parent="root" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.25)
bones/0/rotation = Quaternion(0.101246, -8.26133e-06, -8.40748e-07, 0.994861)
bones/1/rotation = Quaternion(0.60777, 0.0965572, 0.787997, 0.0187947)
bones/1/scale = Vector3(1, 1, 1.00001)
bones/2/rotation = Quaternion(2.11891e-07, 8.17744e-08, 0.0352377, 0.999379)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(0.0448762, 0.946631, 0.319179, -0.000866848)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(-0.607756, 0.0965565, 0.788008, -0.0187959)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(5.12546e-08, -1.6384e-07, -0.0352377, 0.999379)
bones/7/rotation = Quaternion(0.325889, -0.491942, 0.267797, 0.761626)
bones/9/rotation = Quaternion(-0.122616, -0.00326814, 0.000405813, 0.992449)
bones/10/rotation = Quaternion(-0.0702559, 0.00329326, 0.000231928, 0.997524)
bones/11/rotation = Quaternion(0.21338, 0.00657109, 0.00143528, 0.976946)
bones/12/rotation = Quaternion(-0.124075, -0.0067079, -0.000830344, 0.99225)
bones/13/rotation = Quaternion(-0.467393, 0.609864, -0.507784, -0.38957)
bones/16/rotation = Quaternion(0.00982841, 0.431088, -0.0181342, 0.902074)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(0.341268, -0.596286, 0.491172, 0.535471)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.0242938, -0.306756, 0.062481, 0.949425)
bones/18/scale = Vector3(1, 1, 1)
bones/20/rotation = Quaternion(-0.0210058, -0.00324356, -0.0254086, 0.999451)
bones/21/rotation = Quaternion(0.0118949, 0.00235059, 0.026876, 0.999565)
bones/21/scale = Vector3(1, 1, 1)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.00292556, 0.00506363, -0.00420532, 0.999974)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(0.00461138, -0.00230163, -0.00267366, 0.999983)
bones/26/rotation = Quaternion(-0.0150484, -0.00331841, 0.0104023, 0.999827)
bones/27/rotation = Quaternion(0.0136444, 0.00345355, -0.00654886, 0.999879)
bones/30/rotation = Quaternion(-0.129736, 0.89004, -0.0562589, -0.433397)
bones/31/rotation = Quaternion(1.13509e-09, 1.12471e-07, 0.00868708, 0.999962)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(0.341268, 0.596286, -0.491172, 0.535471)
bones/34/rotation = Quaternion(-0.0242941, 0.306756, -0.0624812, 0.949424)
bones/35/rotation = Quaternion(-0.00933267, -0.438618, -0.00853832, 0.898585)
bones/36/rotation = Quaternion(-0.0210058, 0.00324353, 0.0254087, 0.999451)
bones/37/rotation = Quaternion(0.011893, -0.00235239, -0.0268764, 0.999565)
bones/38/rotation = Quaternion(0.0100263, -0.000547765, -0.00461468, 0.999939)
bones/38/scale = Vector3(1, 1, 1)
bones/39/rotation = Quaternion(-0.0170348, 0.00187764, -0.000191135, 0.999853)
bones/39/scale = Vector3(1, 1, 1)
bones/42/rotation = Quaternion(-0.0150484, 0.00331835, -0.0104022, 0.999827)
bones/43/rotation = Quaternion(0.0136406, -0.00345737, 0.00654885, 0.99988)
bones/44/rotation = Quaternion(-0.00613408, 0.00207346, -0.0244957, 0.999679)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="root/Skeleton3D" index="0"]
transform = Transform3D(0.0140609, -0.999275, 0.0353499, 0.0106857, 0.0355016, 0.999312, -0.999844, -0.0136735, 0.011177, -0.643626, 1.43023, -0.0090542)
bone_name = "hand.r"
bone_idx = 16

[node name="AnimationPlayer" parent="." index="1"]
autoplay = "idle"

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_n8in7")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/aiming = false
parameters/conditions/in_air = false
parameters/conditions/is_moving = false
parameters/conditions/on_land = false
"parameters/BlendTree/Fighting Stance/blend_amount" = 0.65
parameters/BlendTree/Movement/blend_position = 1.0
